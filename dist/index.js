(()=>{"use strict";var t={743:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(666)),d=r(n(54)),o=n(113),a=(t,e)=>{const[n,r]=(()=>{const n=t.getUint8(0);if(n in i.default){const r=i.default[n];if(r&&d.default[r].validate(t,e))return[!0,r]}return[!1,void 0]})();return n?r:(()=>{for(let n=0;n<o.specificHandlers.length;n+=1){const r=o.specificHandlers[n];if(d.default[r].validate(t,e))return r}})()};a.default=a,e.default=a},666:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(54));Object.keys(i.default),e.default={56:"psd",66:"bmp",68:"dds",71:"gif",82:"webp",105:"icns",137:"png",255:"jpg"}},341:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.viewTiffImage=e.isTiffBigEndian=e.detectImageType=e.imageSize=void 0;const i=r(n(589)),d=r(n(743)),o=r(n(774)),a=n(897);e.imageSize=(t,e)=>{if("function"!=typeof e)throw new Error("toAscii is not a callback function");const n=d.default(t,e);return i.default(n,t,e)},e.detectImageType=d.default,e.isTiffBigEndian=a.isBigEndian,e.viewTiffImage=o.default,e.imageSize.default=e.imageSize,e.default=e.imageSize},589:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(54));e.default=function(t,e,n){if(void 0!==t&&t in i.default){const r=i.default[t].calculate(e,n);if(void 0!==r)return r.type=t,r}throw new TypeError("unsupported image type: "+t)}},504:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.readUInt32LE=e.readUInt32BE=e.readUInt32=e.readUInt16LE=e.readUInt16BE=e.readUInt16=e.readUInt24LE=e.readInt32LE=e.readInt16LE=void 0,e.readInt16LE=function(t,e){return t.getInt16(e,!0)},e.readInt32LE=function(t,e){return t.getInt32(e,!0)},e.readUInt24LE=function(t,e){return 16777215&t.getUint32(e,!0)},e.readUInt16=function(t,e,n){return t.getUint16(e,!n)},e.readUInt16BE=function(t,e){return t.getUint16(e,!1)},e.readUInt16LE=function(t,e){return t.getUint16(e,!0)},e.readUInt32=function(t,e,n){return t.getUint32(e,!n)},e.readUInt32BE=function(t,e){return t.getUint32(e,!1)},e.readUInt32LE=function(t,e){return t.getUint32(e,!0)}},707:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){let r="";for(let i=e;i<n;i+=1)r+=t.getUint8(i).toString(16).padStart(2,"0");return r}},37:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BMP=void 0;const r=n(504);e.BMP={validate:(t,e)=>"BM"===e(t,0,2),calculate:t=>({height:Math.abs(r.readInt32LE(t,22)),width:r.readUInt32LE(t,18)})}},418:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CUR=void 0;const r=n(822),i=n(504);e.CUR={validate:t=>0===i.readUInt16LE(t,0)&&2===i.readUInt16LE(t,2),calculate:(t,e)=>r.ICO.calculate(t,e)}},70:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DDS=void 0;const r=n(504);e.DDS={validate:t=>542327876===r.readUInt32LE(t,0),calculate:t=>({height:r.readUInt32LE(t,12),width:r.readUInt32LE(t,16)})}},498:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GIF=void 0;const r=n(504),i=/^GIF8[79]a/;e.GIF={validate(t,e){const n=e(t,0,6);return i.test(n)},calculate:t=>({height:r.readUInt16LE(t,8),width:r.readUInt16LE(t,6)})}},663:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ICNS=void 0;const r=n(504),i={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function d(t,e,n){const i=e+4;return[n(t,e,i),r.readUInt32BE(t,i)]}function o(t){const e=i[t];return{width:e,height:e,type:t}}e.ICNS={validate:(t,e)=>"icns"===e(t,0,4),calculate(t,e){const n=t.byteLength,i=r.readUInt32BE(t,4);let a=8,u=d(t,a,e),f=o(u[0]);if(a+=u[1],a===i)return f;const c={height:f.height,images:[f],width:f.width};for(;a<i&&a<n;)u=d(t,a,e),f=o(u[0]),a+=u[1],c.images.push(f);return c}}},822:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ICO=void 0;const r=n(504);function i(t,e){const n=t.getUint8(e);return 0===n?256:n}function d(t,e){const n=6+16*e;return{height:i(t,n+1),width:i(t,n)}}e.ICO={validate:t=>0===r.readUInt16LE(t,0)&&1===r.readUInt16LE(t,2),calculate(t,e){const n=r.readUInt16LE(t,4),i=d(t,0);if(1===n)return i;const o=[i];for(let e=1;e<n;e+=1)o.push(d(t,e));return{height:i.height,images:o,width:i.width}}}},361:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=n(504);e.default=function(t,e,n){return 65505==e&&((t,e)=>{const n=r.readUInt32BE(t,e),i=r.readUInt16BE(t,e+4);return 1165519206===n&&0===i})(t,n)}},473:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.J2C=void 0;const i=n(504),d=r(n(707));e.J2C={validate:t=>"ff4fff51"===d.default(t,0,4),calculate:t=>({height:i.readUInt32BE(t,12),width:i.readUInt32BE(t,8)})}},570:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.JP2=void 0;const i=n(504),d=r(n(707)),o=(t,e)=>({height:i.readUInt32BE(t,e+4),width:i.readUInt32BE(t,e+8)});e.JP2={validate(t){const e=d.default(t,4,8),n=i.readUInt32BE(t,0);if("6a502020"!==e||n<1)return!1;const r=n+4;return"66747970"===d.default(t,r,r+4)},calculate(t,e){const n=i.readUInt32BE(t,0);let r=n+4+i.readUInt16BE(t,n+2);switch(d.default(t,r,r+4)){case"72726571":return r=r+4+4+((t,e)=>{const n=t.getUint8(e);let r=e+1+2*n;return r=r+2+i.readUInt16BE(t,r)*(2+n),r+2+i.readUInt16BE(t,r)*(16+n)})(t,r+4),o(t,r+8);case"6a703268":return o(t,r+8);default:throw new TypeError("Unsupported header found: "+e(t,r,r+4))}}}},449:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.JPG=void 0;const i=n(504),d=r(n(707)),o=r(n(238)),a=r(n(219)),u=r(n(361));function f(t,e){return{height:i.readUInt16BE(t,e),width:i.readUInt16BE(t,e+2)}}function c(t,e){const n=d.default(t,e+6,e+6+2),r="4d4d"===n;if(r||"4949"===n)return function(t,e,n){const r=e+6+8,d=i.readUInt16(t,r,n);for(let e=0;e<d;e++){const d=r+2+12*e;if(d>t.byteLength)return;const o=d;if(274===i.readUInt16(t,o,n)){if(3!==i.readUInt16(t,o+2,n))return;if(1!==i.readUInt32(t,o+4,n))return;return i.readUInt16(t,o+8,n)}}}(t,e,r)}function s(t,e){if(e>t.byteLength)throw new TypeError(`Corrupt JPG index (${e}), exceeded buffer limits (${t.byteLength})`);if(255!==t.getUint8(e))throw new TypeError("Invalid JPG, marker table corrupted")}e.JPG={validate:t=>"ffd8"===o.default(t),calculate(t,e){let n,r=2;for(;r<t.byteLength;){const e=(d=t,o=r,i.readUInt16BE(d,o));let l=r+2;const h=a.default(t,l),I=l+2;if(u.default(t,e,I)&&(n=c(t,I+6)),s(t,r),65472===e||65473===e||65474===e){const e=f(t,l+3);return n?{height:e.height,orientation:n,width:e.width}:e}r=l+h}var d,o;throw new TypeError("Invalid JPG, no size found")}}},82:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KTX=void 0;const r=n(504);e.KTX={validate:(t,e)=>"KTX 11"===e(t,1,7),calculate:t=>({height:r.readUInt32LE(t,40),width:r.readUInt32LE(t,36)})}},974:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PNG=void 0;const r=n(504),i="CgBI";e.PNG={validate(t,e){if("PNG\r\n\n"===e(t,1,8)){let n=e(t,12,16);if(n===i&&(n=e(t,28,32)),"IHDR"!==n)throw new TypeError("Invalid PNG");return!0}return!1},calculate:(t,e)=>e(t,12,16)===i?{height:r.readUInt32BE(t,36),width:r.readUInt32BE(t,32)}:{height:r.readUInt32BE(t,20),width:r.readUInt32BE(t,16)}}},961:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PNM=void 0;const n={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},r=Object.keys(n),i={default:t=>{let e=[];for(;t.length>0;){const n=t.shift();if("#"!==n[0]){e=n.split(" ");break}}if(2===e.length)return{height:parseInt(e[1],10),width:parseInt(e[0],10)};throw new TypeError("Invalid PNM")},pam:t=>{const e={};for(;t.length>0;){const n=t.shift();if(n.length>16||n.charCodeAt(0)>128)continue;const[r,i]=n.split(" ");if(r&&i&&(e[r.toLowerCase()]=parseInt(i,10)),e.height&&e.width)break}if(e.height&&e.width)return{height:e.height,width:e.width};throw new TypeError("Invalid PAM")}};e.PNM={validate(t,e){const n=e(t,0,2);return r.includes(n)},calculate(t,e){const r=e(t,0,2),d=n[r],o=e(t,3,t.byteLength).split(/[\r\n]+/);return(i[d]||i.default)(o)}}},610:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PSD=void 0;const r=n(504);e.PSD={validate:(t,e)=>"8BPS"===e(t,0,4),calculate:t=>({height:r.readUInt32BE(t,14),width:r.readUInt32BE(t,18)})}},219:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=n(504);e.default=function(t,e){return r.readUInt16BE(t,e)}},113:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.specificHandlers=void 0,e.specificHandlers=["cur","ico","j2c","jp2","ktx","pnm","svg","tiff"]},454:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVG=void 0;const n=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,r={height:/\sheight=(['"])([^%]+?)\1/,root:n,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},i=2.54,d={in:96,cm:96/i,em:16,ex:8,m:96/i*100,mm:96/i/10,pc:96/72/12,pt:96/72,px:1},o=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(d).join("|")})?$`);function a(t){const e=o.exec(t);if(e)return Math.round(Number(e[1])*(d[e[2]]||1))}function u(t){const e=t.split(" ");return{height:a(e[3]),width:a(e[2])}}function f(t){return new TextDecoder("utf8").decode(t)}e.SVG={validate(t){const e=f(t);return n.test(e)},calculate(t){const e=f(t).match(r.root);if(e){const t=function(t){const e=t.match(r.width),n=t.match(r.height),i=t.match(r.viewbox);return{height:n&&a(n[2]),viewbox:i&&u(i[2]),width:e&&a(e[2])}}(e[0]);if(t.width&&t.height)return function(t){return{height:t.height,width:t.width}}(t);if(t.viewbox)return function(t,e){const n=e.width/e.height;return t.width?{height:Math.floor(t.width/n),width:t.width}:t.height?{height:t.height,width:Math.floor(t.height*n)}:{height:e.height,width:e.width}}(t,t.viewbox)}throw new TypeError("Invalid SVG")}}},985:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TIFF=void 0,n(504);const i=r(n(707)),d=n(897),o=["49492a00","4d4d002a"];e.TIFF={validate(t,e){const n=i.default(t,0,4);return o.includes(n)},calculate(t,e){const n=d.getIdfOffsetLocation(),r=d.isBigEndian(t,e,n),i={};let o=d.getIdfOffset(t,r);do{const e=d.getNoOfIdfEntries(t,o,r),n=d.beginIndexForIdf(o),a=d.endIndexForIdf(o,e),u=d.getStrideForIdf();for(let e=n;e<a;e+=u)d.extractIdfEntry(i,t,e,r);o=d.getIdfOffset(t,r,a)}while(0!==o);return d.intoResult(i)}}},897:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.intoResult=e.extractIdfEntry=e.endIndexForIdf=e.getStrideForIdf=e.beginIndexForIdf=e.TIFF_IDF_ENTRY_STRIDE=e.TIFF_IDF_OFFSET_SIZE=e.TIFF_IDF_COUNT_STRIDE=e.getNoOfIdfEntries=e.getIdfOffset=e.getIdfOffsetLocation=e.isBigEndian=void 0;const r=n(504);e.isBigEndian=function(t,e,n){const r=e(t,n,2);if("II"===r)return!1;if("MM"===r)return!0;throw new TypeError(`Tiff endian error - ${r}`)},e.getIdfOffsetLocation=function(){return 4},e.getIdfOffset=function(t,e,n=4){return r.readUInt32(t,n,e)},e.getNoOfIdfEntries=function(t,e,n){return r.readUInt16(t,e,n)},e.TIFF_IDF_COUNT_STRIDE=2,e.TIFF_IDF_OFFSET_SIZE=4,e.TIFF_IDF_ENTRY_STRIDE=12,e.beginIndexForIdf=function(t){return t+2},e.getStrideForIdf=function(){return e.TIFF_IDF_ENTRY_STRIDE},e.endIndexForIdf=function(t,n){return t+2+n*e.TIFF_IDF_ENTRY_STRIDE},e.extractIdfEntry=function(t,e,n,i){const d=r.readUInt16(e,n+0,i),o=r.readUInt16(e,n+2,i);if(1===r.readUInt32(e,n+4,i)){const a=n+8;switch(o){case 3:t[d]=r.readUInt16(e,a,i);break;case 4:t[d]=r.readUInt32(e,a,i)}}},e.intoResult=function(t){const e=t[256],n=t[257];if(!e||!n)throw new TypeError("Invalid Tiff. Missing tags");return{height:n,width:e,type:"tiff"}}},54:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=n(37),i=n(418),d=n(70),o=n(498),a=n(663),u=n(822),f=n(473),c=n(570),s=n(449),l=n(82),h=n(974),I=n(961),g=n(610),_=n(454),p=n(985),v=n(48),E={bmp:r.BMP,cur:i.CUR,dds:d.DDS,gif:o.GIF,icns:a.ICNS,ico:u.ICO,j2c:f.J2C,jp2:c.JP2,jpg:s.JPG,ktx:l.KTX,png:h.PNG,pnm:I.PNM,psd:g.PSD,svg:_.SVG,tiff:p.TIFF,webp:v.WEBP};e.default=E},238:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(707));e.default=function(t){return i.default(t,0,2)}},48:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBP=void 0;const i=n(504),d=r(n(707));e.WEBP={validate(t,e){const n="RIFF"===e(t,0,4),r="WEBP"===e(t,8,12),i="VP8"===e(t,12,15);return n&&r&&i},calculate(t,e){const n=e(t,12,16);if("VP8X"===n){const e=t.getUint8(20),n=0==(1&e);if(0==(192&e)&&n)return function(t,e){return{height:1+i.readUInt24LE(t,27),width:1+i.readUInt24LE(t,24)}}(t);throw new TypeError("Invalid WebP")}if("VP8 "===n&&47!==t.getUint8(20))return function(t,e){return{height:16383&i.readInt16LE(t,28),width:16383&i.readInt16LE(t,26)}}(t);const r=d.default(t,23,26);if("VP8L"===n&&"9d012a"!==r)return function(t,e){return{height:1+((15&t.getUint8(24))<<10|t.getUint8(23)<<2|(192&t.getUint8(22))>>6),width:1+((63&t.getUint8(22))<<8|t.getUint8(21))}}(t);throw new TypeError("Invalid WebP")}}},774:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=n(897),i=(t,e)=>e(t,r.TIFF_IDF_COUNT_STRIDE),d=(t,e)=>r.getNoOfIdfEntries(t,0,e);e.default=function(t,e){const n={};let o=e(0,8),a=r.getIdfOffsetLocation(),u=r.getIdfOffset(o,t,a);const f=r.getStrideForIdf();do{const a=0;o=i(u,e);const s=d(o,t),l=r.endIndexForIdf(0,s);o=e(u,(c=l,r.TIFF_IDF_COUNT_STRIDE+c+r.TIFF_IDF_OFFSET_SIZE));for(let e=r.beginIndexForIdf(a);e<l;e+=f)r.extractIdfEntry(n,o,e,t);u=r.getIdfOffset(o,t,l)}while(0!==u);var c;return r.intoResult(n)}}},e={};!function n(r){var i=e[r];if(void 0!==i)return i.exports;var d=e[r]={exports:{}};return t[r].call(d.exports,d,d.exports,n),d.exports}(341)})();
//# sourceMappingURL=index.js.map